<!DOCTYPE html>
<html lang="en">

<head>
  <title>Alhafi News Blogs</title>
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8" />
  <link rel="shortcut icon" href="#" />

  <script src="https://unpkg.com/htmx.org@1.9.10"></script>
  <script src="https://unpkg.com/htmx.org/dist/ext/client-side-templates.js"></script>
  <script src="https://unpkg.com/mustache@latest"></script>
  <script src="https://unpkg.com/htmx.org/dist/ext/response-targets.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/nunjucks@3.2.4/browser/nunjucks.min.js"></script>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous">
    </script>

  <script>

function removeDiv( div ) {

  const element = document.getElementById(div);
  element.remove();
}

    function checkFirstVisit() {
      if (document.cookie.indexOf('mycookie') == -1) {
        // The cookie doesn't exist. Create it now
        document.cookie = 'mycookie=1';
      }
      else {
        // Not the first visit, so alert
        alert('You refreshed!');
      }
    };
    function changeText(id) {
      document
        .getElementById("titleID")
        .setAttribute("value", document.getElementById("xtitleID-" + id).innerHTML);
      document.getElementById("contentID").value = '';
      document.getElementById("contentID").value =
        (document.getElementById("xcontentID-" + id).innerHTML).trim();
    }

    htmx.defineExtension("Alhafi-JSON-Accept-type", {
      onEvent: function (name, evt) {
        if (name === "htmx:configRequest") {
          //evt.detail.headers["Content-Type"] = "application/json";
          evt.detail.headers["Content-Type"] = "application/json";
        }
      },

      encodeParameters: function (xhr, parameters, elt) {
        xhr.overrideMimeType("text/json");

        return JSON.stringify(parameters);
        //location.reload();
      },
    });
  </script>
</head>

<body onload="checkFirstVisit()">
  <div class="container col-sm-6 offset-lg-3 align-items-center justify-content-center" hx-ext="client-side-templates">
    <h1 class="display-6 text-center">Alhafi Blog</h1>

    <form hx-post="https://localhost:7137/posts/html" hx-target=".posts-row" hx-swap="beforeend"  enctype="multipart/form-data" contentType="application/json" >
      <input type="hidden" class="form-control mb-3" name="id" placeholder="Please enter Title" value=0  />

      <input type="text" class="form-control mb-3" name="title" placeholder="Please enter Title" required />

      <textarea class="form-control mb-3" name="content" rows="3" placeholder="Please enter Content"
        wrap="virtual"></textarea>

      <button class="btn btn-primary mb-3">Add Post</button>

    </form>


    <div class="row justify-content-around posts-row" hx-get="https://localhost:7137/html/post" hx-trigger="load once">





    </div>






  </div>

  </div>
</body>

</html>